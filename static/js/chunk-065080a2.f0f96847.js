(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-065080a2"],{1637:function(e,t,r){},"7a25":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-header",{staticClass:"search_header",staticStyle:{"min-height":"60px",height:"auto"}},[r("el-form",{attrs:{"label-position":"left"}},[r("div",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"绩效等级",prop:"merits"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.handleSearch},model:{value:e.query.merits,callback:function(t){e.$set(e.query,"merits",t)},expression:"query.merits"}},e._l(e.ahms,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"人员",prop:"userId"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.handleSearch},model:{value:e.query.userId,callback:function(t){e.$set(e.query,"userId",t)},expression:"query.userId"}},e._l(e.users,(function(e){return r("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-form-item",{attrs:{label:"绩效日期"}},[r("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"yyyy-MM","value-format":"yyyy-MM",editable:!1},on:{change:e.handleSearch},model:{value:e.query.date,callback:function(t){e.$set(e.query,"date",t)},expression:"query.date"}})],1)],1),e._v(" "),r("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:8}},[r("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.$refs.AchievenmentScoreEditor.show()}}},[e._v("\n              添加绩效评分\n            ")])],1)],1)],1)])],1),e._v(" "),r("el-main",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,border:"",stripe:""}},[r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",label:"绩效时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")(t.row.createTime,"yyyy-MM"))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:"dept.name",label:"绩效部门"}}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:"userId",label:"绩效人"}}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:"merits",label:"绩效等级"}}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:"createTime",label:"绩效上报时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.year)+"-"+e._s(t.row.month)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:"remark",label:"绩效评分描述"}}),e._v(" "),r("el-table-column",{attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.$refs.AchievenmentScoreEditor.show(t.row)}}},[e._v("\n            修改\n          ")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.query.page,"page-size":e.query.limit,layout:"total, prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),r("AchievenmentScoreEditor",{ref:"AchievenmentScoreEditor",attrs:{ahms:e.ahms,users:e.users},on:{change:e.getListData}})],1)},a=[],i=(r("9a33"),r("63ff"),r("e5af")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{attrs:{"append-to-body":"","modal-append-to-body":"",title:"提示",visible:e.dialogVisible,size:"mobile"===e.$store.getters.device?"100%":"450px","custom-class":"editor-drawer"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"editor-drawer_content"},[r("el-form",{ref:"form",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"绩效等级",prop:"merits"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.merits,callback:function(t){e.$set(e.form,"merits",t)},expression:"form.merits"}},e._l(e.ahms,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"人员",prop:"userId"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.users,(function(e){return r("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"年份",prop:"year"}},[r("el-date-picker",{attrs:{type:"year",placeholder:"选择年",format:"yyyy","value-format":"yyyy",editable:!1},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"月份",prop:"month"}},[r("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"MM","value-format":"MM",editable:!1},model:{value:e.form.month,callback:function(t){e.$set(e.form,"month",t)},expression:"form.month"}})],1)],1),e._v(" "),r("div",{staticClass:"editor-drawer_footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        确 定\n      ")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n        取 消\n      ")])],1)],1)])},s=[],o=r("9ed4"),u={props:{ahms:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,form:{merits:"",month:"",userId:"",year:""},rules:{merits:[{required:!0,message:"请选择绩效等级",trigger:"blur"}],month:[{required:!0,message:"请选择绩效月份",trigger:"blur"}],userId:[{required:!0,message:"请选择绩效人员",trigger:"blur"}],year:[{required:!0,message:"请选择绩效年份",trigger:"blur"}]}}},methods:{show:function(e){if(e){var t=Object.assign({},e);t.year=String(t.year),t.month=String(t.month),this.form=t}else this.form={name:"",scale:""};this.dialogVisible=!0},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:if(n=Object.assign({},e.form),n.deptId=e.$store.getters.deptId,!n.id){t.next=9;break}return t.next=7,Object(o["g"])(n);case 7:t.next=12;break;case 9:return delete n.id,t.next=12,Object(o["e"])(n);case 12:e.$message.success("操作成功！"),e.dialogVisible=!1,e.$emit("change");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=u,d=(r("d128"),r("5511")),m=Object(d["a"])(c,l,s,!1,null,null,null),h=m.exports,f=r("c24f"),p={name:"AchievementList",components:{AchievenmentScoreEditor:h},data:function(){return{ahms:[],users:[],tableData:{rows:[],total:0},query:{page:1,limit:10,merits:"",userId:"",date:""}}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])({deptId:this.$store.getters.deptId});case 2:return t=e.sent,e.next=5,Object(f["b"])();case 5:r=e.sent,this.ahms=t.data,this.users=r.result,this.getListData();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getListData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.assign({},this.query),t.deptId=this.$store.getters.deptId,t.date&&(t.year=t.date.split("-")[0],t.month=t.date.split("-")[1]),e.next=5,Object(o["c"])(t);case 5:r=e.sent,this.tableData.rows=r.data.rows,this.tableData.total=r.data.total;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteRow:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("确认删除？");case 2:return e.next=4,Object(o["a"])(t);case 4:this.getListData(),this.$message.success("操作成功！");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(){this.$refs.searchForm.resetFields()},handleSearch:function(){this.query.page=1,this.getListData()},handleSizeChange:function(e){this.query.page=1,this.query.limit=e,this.getListData()},handleCurrentChange:function(e){this.query.page=e,this.getListData()}}},b=p,g=(r("829f"),Object(d["a"])(b,n,a,!1,null,null,null));t["default"]=g.exports},"7c86":function(e,t,r){},"829f":function(e,t,r){"use strict";var n=r("1637"),a=r.n(n);a.a},"9a33":function(e,t,r){"use strict";var n=r("2fd4"),a=r("69b3"),i=r("f63e"),l=r("e754"),s=r("eafa"),o=r("7108"),u=r("8714"),c=r("238a"),d=Math.min,m=[].push,h="split",f="length",p="lastIndex",b=4294967295,g=!c((function(){RegExp(b,"y")}));r("0aed")("split",2,(function(e,t,r,c){var v;return v="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[f]||2!="ab"[h](/(?:ab)*/)[f]||4!="."[h](/(.?)(.?)/)[f]||"."[h](/()()/)[f]>1||""[h](/.?/)[f]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(a,e,t);var i,l,s,o=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?b:t>>>0,g=new RegExp(e.source,c+"g");while(i=u.call(g,a)){if(l=g[p],l>d&&(o.push(a.slice(d,i.index)),i[f]>1&&i.index<a[f]&&m.apply(o,i.slice(1)),s=i[0][f],d=l,o[f]>=h))break;g[p]===i.index&&g[p]++}return d===a[f]?!s&&g.test("")||o.push(""):o.push(a.slice(d)),o[f]>h?o.slice(0,h):o}:"0"[h](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,n):v.call(String(a),r,n)},function(e,t){var n=c(v,e,this,t,v!==r);if(n.done)return n.value;var u=a(e),m=String(this),h=i(u,RegExp),f=u.unicode,p=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),y=new h(g?u:"^(?:"+u.source+")",p),w=void 0===t?b:t>>>0;if(0===w)return[];if(0===m.length)return null===o(y,m)?[m]:[];var x=0,_=0,k=[];while(_<m.length){y.lastIndex=g?_:0;var S,j=o(y,g?m:m.slice(_));if(null===j||(S=d(s(y.lastIndex+(g?0:_)),m.length))===x)_=l(m,_,f);else{if(k.push(m.slice(x,_)),k.length===w)return k;for(var O=1;O<=j.length-1;O++)if(k.push(j[O]),k.length===w)return k;_=x=S}}return k.push(m.slice(x)),k}]}))},"9ed4":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return u})),r.d(t,"g",(function(){return c}));var n=r("b775"),a=function(e){return Object(n["a"])({url:"/hrm/hrmmerits/getDeptMerits/".concat(e.deptId),method:"get",data:e})},i=function(e){return Object(n["a"])({url:"/hrm/hrmmerits/deleteMerits/".concat(e.id),method:"delete"})},l=function(e){return Object(n["a"])({url:"/hrm/hrmmerits/addMerits",method:"post",form:e})},s=function(e){return Object(n["a"])({url:"/hrm/hrmmerits/updateMerits",method:"post",form:e})},o=function(e){return Object(n["a"])({url:"/hrm/hrmmeritsscore/getScoreList/".concat(e.page,"/").concat(e.limit),method:"get",data:e})},u=function(e){return Object(n["a"])({url:"/hrm/hrmmeritsscore/addMeritsScore",method:"post",form:e})},c=function(e){return Object(n["a"])({url:"/hrm/hrmmeritsscore/updateMeritsScore",method:"post",form:e})}},d128:function(e,t,r){"use strict";var n=r("7c86"),a=r.n(n);a.a}}]);